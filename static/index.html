<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EditPDFree API - PDF Processing Made Simple</title>
    <meta name="description" content="Powerful PDF API for developers. Convert HTML to PDF, merge, compress, split, watermark and protect PDFs. Free tier available.">
    <link rel="canonical" href="https://api.editpdfree.com/">
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8795551727779005" crossorigin="anonymous"></script>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --primary-light: #dbeafe;
            --secondary: #0f172a;
            --accent: #f59e0b;
            --bg: #f8fafc;
            --card-bg: #ffffff;
            --text: #1e293b;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --success: #10b981;
            --code-bg: #1e293b;
            --radius: 12px;
            --shadow: 0 1px 3px rgba(0,0,0,.08), 0 4px 16px rgba(0,0,0,.06);
            --shadow-lg: 0 4px 24px rgba(0,0,0,.12);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        /* â”€â”€ Nav â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        nav {
            position: sticky; top: 0; z-index: 100;
            background: rgba(255,255,255,.9);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
            padding: 0 2rem;
        }
        .nav-inner {
            max-width: 1200px; margin: 0 auto;
            display: flex; align-items: center; justify-content: space-between;
            height: 64px;
        }
        .nav-logo { font-weight: 800; font-size: 1.3rem; color: var(--primary); text-decoration: none; }
        .nav-logo span { color: var(--secondary); }
        .nav-links { display: flex; gap: 1.5rem; align-items: center; }
        .nav-links a { color: var(--text-muted); text-decoration: none; font-size: .9rem; font-weight: 500; transition: color .2s; }
        .nav-links a:hover { color: var(--primary); }
        a[href^="mailto:"] { text-decoration: none; }
        .btn {
            display: inline-flex; align-items: center; gap: .5rem;
            padding: .6rem 1.4rem; border-radius: 8px; font-weight: 600;
            font-size: .9rem; text-decoration: none; transition: all .2s; border: none; cursor: pointer;
        }
        .btn-primary { background: var(--primary); color: #fff; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-1px); box-shadow: var(--shadow); }
        .btn-outline { background: transparent; color: var(--primary); border: 2px solid var(--primary); }
        .btn-outline:hover { background: var(--primary-light); }
        .btn-sm { padding: .4rem 1rem; font-size: .85rem; }

        /* â”€â”€ Hero â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .hero {
            padding: 5rem 2rem 4rem;
            text-align: center;
            background: linear-gradient(135deg, #eff6ff 0%, #f8fafc 50%, #fefce8 100%);
        }
        .hero-badge {
            display: inline-flex; align-items: center; gap: .4rem;
            background: var(--primary-light); color: var(--primary);
            padding: .35rem .9rem; border-radius: 99px; font-size: .8rem; font-weight: 600;
            margin-bottom: 1.5rem;
        }
        .hero h1 { font-size: 3.2rem; font-weight: 800; letter-spacing: -.03em; max-width: 700px; margin: 0 auto 1rem; line-height: 1.15; }
        .hero h1 span { color: var(--primary); }
        .hero p { font-size: 1.2rem; color: var(--text-muted); max-width: 560px; margin: 0 auto 2rem; }
        .hero-actions { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }
        .hero-code {
            max-width: 620px; margin: 3rem auto 0; background: var(--code-bg); border-radius: var(--radius);
            padding: 1.2rem 1.5rem; text-align: left; position: relative; box-shadow: var(--shadow-lg);
        }
        .hero-code pre { color: #e2e8f0; font-size: .85rem; overflow-x: auto; white-space: pre; }
        .hero-code .kw { color: #93c5fd; }
        .hero-code .str { color: #86efac; }
        .hero-code .cmt { color: #64748b; }
        .copy-btn {
            position: absolute; top: .7rem; right: .7rem;
            background: #334155; border: none; color: #94a3b8; padding: .3rem .6rem;
            border-radius: 6px; cursor: pointer; font-size: .75rem; transition: all .2s;
        }
        .copy-btn:hover { background: #475569; color: #e2e8f0; }

        /* â”€â”€ Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .section { padding: 5rem 2rem; max-width: 1200px; margin: 0 auto; }
        .section-header { text-align: center; margin-bottom: 3rem; }
        .section-header h2 { font-size: 2.2rem; font-weight: 700; margin-bottom: .5rem; }
        .section-header p { color: var(--text-muted); font-size: 1.05rem; max-width: 520px; margin: 0 auto; }

        /* â”€â”€ Feature grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .features-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }
        .feature-card {
            background: var(--card-bg); border: 1px solid var(--border); border-radius: var(--radius);
            padding: 1.8rem; transition: all .2s;
        }
        .feature-card:hover { box-shadow: var(--shadow); border-color: var(--primary); transform: translateY(-2px); }
        .feature-icon {
            width: 44px; height: 44px; border-radius: 10px; display: flex; align-items: center; justify-content: center;
            font-size: 1.3rem; margin-bottom: 1rem;
        }
        .feature-card h3 { font-size: 1.05rem; font-weight: 700; margin-bottom: .4rem; }
        .feature-card p { color: var(--text-muted); font-size: .9rem; }
        .feature-card code {
            display: inline-block; background: #f1f5f9; color: var(--primary); padding: .15rem .5rem;
            border-radius: 4px; font-size: .78rem; margin-top: .5rem; font-weight: 600;
        }
        .fi-blue { background: #dbeafe; color: #2563eb; }
        .fi-green { background: #dcfce7; color: #16a34a; }
        .fi-purple { background: #f3e8ff; color: #9333ea; }
        .fi-orange { background: #ffedd5; color: #ea580c; }
        .fi-red { background: #fee2e2; color: #dc2626; }
        .fi-yellow { background: #fef9c3; color: #ca8a04; }
        .fi-teal { background: #ccfbf1; color: #0d9488; }

        /* â”€â”€ Pricing â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .pricing-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; }
        .pricing-card {
            background: var(--card-bg); border: 1px solid var(--border); border-radius: var(--radius);
            padding: 2rem; text-align: center; transition: all .2s; position: relative;
        }
        .pricing-card.popular { border-color: var(--primary); box-shadow: var(--shadow-lg); transform: scale(1.03); }
        .popular-badge {
            position: absolute; top: -12px; left: 50%; transform: translateX(-50%);
            background: var(--primary); color: #fff; padding: .25rem .8rem; border-radius: 99px;
            font-size: .75rem; font-weight: 700;
        }
        .pricing-card h3 { font-size: 1.1rem; font-weight: 700; margin-bottom: .5rem; }
        .pricing-price { font-size: 2.5rem; font-weight: 800; margin: .5rem 0; }
        .pricing-price span { font-size: .9rem; font-weight: 400; color: var(--text-muted); }
        .pricing-features { list-style: none; margin: 1.5rem 0; text-align: left; }
        .pricing-features li { padding: .35rem 0; font-size: .88rem; color: var(--text-muted); display: flex; align-items: center; gap: .5rem; }
        .pricing-features li::before { content: "\2713"; color: var(--success); font-weight: 700; font-size: .8rem; flex-shrink: 0; }
        .pricing-card .btn { width: 100%; justify-content: center; margin-top: auto; }

        /* â”€â”€ Get API Key Form â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .key-form-card {
            background: linear-gradient(135deg, var(--primary-light) 0%, #fef9c3 100%);
            border: 2px solid var(--primary); border-radius: var(--radius); padding: 2.5rem;
            max-width: 600px; margin: 0 auto; text-align: center; box-shadow: var(--shadow-lg);
        }
        .key-form-card h3 { font-size: 1.5rem; font-weight: 700; margin-bottom: .5rem; }
        .key-form-card p { color: var(--text-muted); margin-bottom: 1.5rem; }
        .key-input-group { display: flex; gap: .5rem; margin-bottom: 1rem; }
        .key-input-group input {
            flex: 1; padding: .7rem 1rem; border: 1px solid var(--border); border-radius: 8px;
            font-size: .95rem; font-family: inherit;
        }
        .key-input-group input:focus { outline: none; border-color: var(--primary); }
        .key-result {
            display: none; margin-top: 1.5rem; padding: 1rem; background: var(--card-bg);
            border: 1px solid var(--border); border-radius: 8px; text-align: left;
        }
        .key-result-label { font-size: .8rem; font-weight: 600; color: var(--text-muted); margin-bottom: .3rem; }
        .key-result-value {
            font-family: 'Courier New', monospace; font-size: .9rem; padding: .6rem;
            background: #f1f5f9; border-radius: 4px; word-break: break-all; display: flex;
            align-items: center; justify-content: space-between; gap: .5rem;
        }
        .key-result-value button {
            background: var(--primary); color: #fff; border: none; padding: .3rem .7rem;
            border-radius: 4px; cursor: pointer; font-size: .8rem; font-weight: 600; white-space: nowrap;
        }
        .key-result-value button:hover { background: var(--primary-dark); }

        /* â”€â”€ FAQ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .faq-grid { max-width: 800px; margin: 0 auto; }
        .faq-item { margin-bottom: 1.5rem; }
        .faq-item h3 { font-size: 1.05rem; font-weight: 700; margin-bottom: .4rem; color: var(--text); }
        .faq-item p { color: var(--text-muted); font-size: .95rem; line-height: 1.6; }

        /* â”€â”€ Code examples â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .code-tabs { display: flex; gap: .5rem; margin-bottom: 0; flex-wrap: wrap; }
        .code-tab {
            padding: .5rem 1rem; border-radius: 8px 8px 0 0; cursor: pointer;
            font-size: .85rem; font-weight: 600; border: 1px solid var(--border);
            border-bottom: none; background: #f1f5f9; color: var(--text-muted); transition: all .2s;
        }
        .code-tab.active { background: var(--code-bg); color: #e2e8f0; border-color: var(--code-bg); }
        .code-panel {
            display: none; background: var(--code-bg); border-radius: 0 var(--radius) var(--radius) var(--radius);
            padding: 1.5rem; position: relative;
        }
        .code-panel.active { display: block; }
        .code-panel pre { color: #e2e8f0; font-size: .82rem; overflow-x: auto; white-space: pre; line-height: 1.5; }

        /* â”€â”€ Playground â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .playground {
            background: var(--card-bg); border: 1px solid var(--border); border-radius: var(--radius);
            padding: 2rem; box-shadow: var(--shadow);
        }
        .playground-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }
        .playground label { display: block; font-weight: 600; font-size: .85rem; margin-bottom: .4rem; }
        .playground select, .playground input, .playground textarea {
            width: 100%; padding: .6rem .8rem; border: 1px solid var(--border); border-radius: 8px;
            font-size: .9rem; font-family: inherit; background: var(--bg); transition: border-color .2s;
        }
        .playground select:focus, .playground input:focus, .playground textarea:focus { outline: none; border-color: var(--primary); }
        .playground textarea { min-height: 120px; resize: vertical; font-family: 'Courier New', monospace; }
        .playground-result {
            margin-top: 1rem; padding: 1rem; background: #f1f5f9; border-radius: 8px;
            font-family: 'Courier New', monospace; font-size: .85rem; white-space: pre-wrap;
            max-height: 200px; overflow-y: auto; display: none;
        }

        /* â”€â”€ Docs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .endpoint-card {
            background: var(--card-bg); border: 1px solid var(--border); border-radius: var(--radius);
            padding: 1.5rem; margin-bottom: 1rem;
        }
        .endpoint-method {
            display: inline-block; padding: .2rem .6rem; border-radius: 4px;
            font-size: .75rem; font-weight: 700; color: #fff; margin-right: .5rem;
        }
        .method-post { background: #16a34a; }
        .method-get { background: #2563eb; }
        .endpoint-path { font-family: 'Courier New', monospace; font-weight: 600; font-size: .95rem; }
        .endpoint-desc { color: var(--text-muted); font-size: .9rem; margin-top: .4rem; }
        .endpoint-params { margin-top: 1rem; }
        .endpoint-params table { width: 100%; border-collapse: collapse; font-size: .85rem; }
        .endpoint-params th { text-align: left; padding: .4rem .6rem; background: #f8fafc; border-bottom: 2px solid var(--border); font-weight: 600; }
        .endpoint-params td { padding: .4rem .6rem; border-bottom: 1px solid var(--border); }
        .endpoint-params code { background: #f1f5f9; padding: .1rem .4rem; border-radius: 3px; font-size: .8rem; }

        /* â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        footer {
            background: var(--secondary); color: #94a3b8; padding: 3rem 2rem;
            text-align: center; font-size: .9rem;
        }
        footer a { color: #60a5fa; text-decoration: none; }
        footer a:hover { color: #93c5fd; }

        /* â”€â”€ Auth & Dashboard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .auth-buttons { display: flex; gap: .5rem; align-items: center; }
        .btn-login { background: transparent; color: var(--primary); border: 1px solid var(--primary); padding: .4rem 1rem; border-radius: 8px; font-weight: 600; font-size: .85rem; cursor: pointer; transition: all .2s; }
        .btn-login:hover { background: var(--primary-light); }
        .btn-signup { background: var(--primary); color: #fff; border: none; padding: .4rem 1rem; border-radius: 8px; font-weight: 600; font-size: .85rem; cursor: pointer; transition: all .2s; }
        .btn-signup:hover { background: var(--primary-dark); }
        .user-menu { display: flex; align-items: center; gap: .8rem; }
        .user-avatar { width: 32px; height: 32px; border-radius: 50%; background: var(--primary); color: #fff; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: .85rem; }
        .user-email { font-size: .85rem; color: var(--text-muted); max-width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .btn-dashboard-link { color: var(--primary); font-weight: 600; font-size: .85rem; cursor: pointer; background: none; border: none; text-decoration: underline; }
        .btn-logout { background: none; border: 1px solid var(--border); color: var(--text-muted); padding: .3rem .8rem; border-radius: 6px; font-size: .8rem; cursor: pointer; }
        .btn-logout:hover { border-color: #dc2626; color: #dc2626; }

        /* Auth Modal */
        .auth-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,.5); z-index: 200; align-items: center; justify-content: center; }
        .auth-modal.active { display: flex; }
        .auth-modal-content { background: #fff; border-radius: var(--radius); padding: 2rem; max-width: 420px; width: 90%; box-shadow: var(--shadow-lg); }
        .auth-modal-content h3 { font-size: 1.3rem; margin-bottom: .5rem; }
        .auth-modal-content p { color: var(--text-muted); font-size: .9rem; margin-bottom: 1.5rem; }
        .auth-input { width: 100%; padding: .7rem 1rem; border: 1px solid var(--border); border-radius: 8px; font-size: .95rem; margin-bottom: .8rem; font-family: inherit; }
        .auth-input:focus { outline: none; border-color: var(--primary); }
        .auth-error { color: #dc2626; font-size: .85rem; margin-bottom: .8rem; display: none; }
        .auth-switch { text-align: center; margin-top: 1rem; font-size: .9rem; color: var(--text-muted); }
        .auth-switch a { color: var(--primary); font-weight: 600; cursor: pointer; text-decoration: none; }
        .auth-divider { text-align: center; color: var(--text-muted); font-size: .85rem; margin: 1rem 0; position: relative; }
        .auth-divider::before, .auth-divider::after { content: ''; position: absolute; top: 50%; width: 40%; height: 1px; background: var(--border); }
        .auth-divider::before { left: 0; }
        .auth-divider::after { right: 0; }
        .btn-google { width: 100%; padding: .7rem; border: 1px solid var(--border); border-radius: 8px; background: #fff; cursor: pointer; font-size: .9rem; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: .5rem; transition: all .2s; }
        .btn-google:hover { background: #f8fafc; border-color: var(--text-muted); }

        /* Dashboard Section */
        .dashboard-section { display: none; }
        .dashboard-section.active { display: block; }
        .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; max-width: 900px; margin: 0 auto; }
        .dash-card { background: var(--card-bg); border: 1px solid var(--border); border-radius: var(--radius); padding: 1.5rem; }
        .dash-card h4 { font-size: .85rem; color: var(--text-muted); font-weight: 600; margin-bottom: .8rem; text-transform: uppercase; letter-spacing: .05em; }
        .dash-value { font-size: 1.8rem; font-weight: 800; color: var(--text); }
        .dash-sub { font-size: .85rem; color: var(--text-muted); margin-top: .3rem; }
        .dash-key-box { display: flex; align-items: center; gap: .5rem; background: #f1f5f9; padding: .6rem .8rem; border-radius: 8px; font-family: 'Courier New', monospace; font-size: .9rem; word-break: break-all; }
        .dash-key-box button { flex-shrink: 0; }
        .usage-bar { width: 100%; height: 8px; background: #e2e8f0; border-radius: 4px; margin-top: .8rem; overflow: hidden; }
        .usage-bar-fill { height: 100%; background: var(--primary); border-radius: 4px; transition: width .3s; }
        .usage-bar-fill.warning { background: var(--accent); }
        .usage-bar-fill.danger { background: #dc2626; }
        .plan-badge { display: inline-block; padding: .2rem .7rem; border-radius: 99px; font-size: .8rem; font-weight: 700; text-transform: uppercase; }
        .plan-free { background: #f1f5f9; color: var(--text-muted); }
        .plan-starter { background: #dbeafe; color: #2563eb; }
        .plan-pro { background: #f3e8ff; color: #9333ea; }
        .plan-business { background: #dcfce7; color: #16a34a; }
        .dash-actions { display: flex; gap: .8rem; margin-top: 1rem; flex-wrap: wrap; }

        /* â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        @media (max-width: 768px) {
            .hero h1 { font-size: 2rem; }
            .playground-row { grid-template-columns: 1fr; }
            .pricing-card.popular { transform: none; }
            .nav-links { gap: .8rem; }
            .nav-links a.hide-mobile { display: none; }
        }
    </style>
</head>
<body>

<!-- â”€â”€ Navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<nav>
    <div class="nav-inner">
        <a href="/" class="nav-logo">Edit<span>PDF</span>ree <small style="font-weight:400;font-size:.75rem;color:var(--text-muted)">API</small></a>
        <div class="nav-links">
            <a href="#features">Features</a>
            <a href="#get-key">Get Key</a>
            <a href="#pricing" class="hide-mobile">Pricing</a>
            <a href="#docs" class="hide-mobile">Docs</a>
            <a href="#faq" class="hide-mobile">FAQ</a>
            <a href="https://www.editpdfree.com" target="_blank" class="btn btn-outline btn-sm">EditPDFree.com</a>
            <!-- Auth buttons (shown when logged out) -->
            <div class="auth-buttons" id="auth-buttons">
                <button class="btn-login" onclick="showAuthModal('login')">Log in</button>
                <button class="btn-signup" onclick="showAuthModal('signup')">Sign up</button>
            </div>
            <!-- User menu (shown when logged in) -->
            <div class="user-menu" id="user-menu" style="display:none;">
                <button class="btn-dashboard-link" onclick="scrollToDashboard()">Dashboard</button>
                <div class="user-avatar" id="user-avatar">U</div>
                <button class="btn-logout" onclick="logoutUser()">Log out</button>
            </div>
        </div>
    </div>
</nav>

<!-- â”€â”€ Hero â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section class="hero">
    <div class="hero-badge">REST API &middot; Free Tier Available</div>
    <h1>PDF Processing <span>Made Simple</span></h1>
    <p>A fast, reliable API to convert, merge, compress, split, watermark and protect PDFs. Start free, scale as you grow.</p>
    <div class="hero-actions">
        <a href="#get-key" class="btn btn-primary">Get Free API Key</a>
        <a href="#docs" class="btn btn-outline">Read the Docs</a>
    </div>
    <div class="hero-code">
        <button class="copy-btn" onclick="copyHero()">Copy</button>
        <pre><span class="cmt"># Convert HTML to PDF in one request</span>
<span class="kw">curl</span> -X POST https://api.editpdfree.com/api/v1/html-to-pdf \
  -H <span class="str">"Content-Type: application/json"</span> \
  -H <span class="str">"X-API-Key: YOUR_KEY"</span> \
  -d <span class="str">'{"html": "&lt;h1&gt;Hello World&lt;/h1&gt;", "options": {"format": "A4"}}'</span> \
  -o output.pdf</pre>
    </div>
</section>

<!-- â”€â”€ Auth Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="auth-modal" id="auth-modal">
    <div class="auth-modal-content">
        <div id="auth-login-form">
            <div class="auth-notice" id="auth-notice" style="display:none;background:#dbeafe;color:#1d4ed8;padding:.7rem 1rem;border-radius:8px;font-size:.9rem;font-weight:600;margin-bottom:1rem;text-align:center;"></div>
            <h3>Log in to your account</h3>
            <p>Access your API dashboard and manage your key.</p>
            <div class="auth-error" id="auth-error"></div>
            <input type="email" class="auth-input" id="auth-email" placeholder="Email address">
            <input type="password" class="auth-input" id="auth-password" placeholder="Password">
            <div style="display:flex;gap:.5rem;">
                <button class="btn btn-primary" style="flex:1;" onclick="loginWithEmail()">Log in</button>
                <button class="btn btn-outline" style="flex:0 0 auto;" onclick="closeAuthModal()">Cancel</button>
            </div>
            <div class="auth-divider">or</div>
            <button class="btn-google" onclick="loginWithGoogle()">
                <svg width="18" height="18" viewBox="0 0 48 48"><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/></svg>
                Continue with Google
            </button>
            <div class="auth-switch">Don't have an account? <a onclick="switchAuthMode('signup')">Sign up</a></div>
        </div>
        <div id="auth-signup-form" style="display:none;">
            <h3>Create your account</h3>
            <p>Get your API key and start processing PDFs.</p>
            <div class="auth-error" id="auth-signup-error"></div>
            <input type="email" class="auth-input" id="signup-email" placeholder="Email address">
            <input type="password" class="auth-input" id="signup-password" placeholder="Password (min 6 characters)">
            <div style="display:flex;gap:.5rem;">
                <button class="btn btn-primary" style="flex:1;" onclick="signupWithEmail()">Create account</button>
                <button class="btn btn-outline" style="flex:0 0 auto;" onclick="closeAuthModal()">Cancel</button>
            </div>
            <div class="auth-divider">or</div>
            <button class="btn-google" onclick="loginWithGoogle()">
                <svg width="18" height="18" viewBox="0 0 48 48"><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/></svg>
                Continue with Google
            </button>
            <div class="auth-switch">Already have an account? <a onclick="switchAuthMode('login')">Log in</a></div>
        </div>
    </div>
</div>

<!-- â”€â”€ Dashboard Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section class="section dashboard-section" id="dashboard">
    <div class="section-header">
        <h2>Your Dashboard</h2>
        <p>Manage your API key, monitor usage, and control your subscription.</p>
    </div>
    <div class="dashboard-grid">
        <!-- API Key Card -->
        <div class="dash-card" style="grid-column: 1 / -1;">
            <h4>API Key</h4>
            <div class="dash-key-box">
                <span id="dash-api-key">Loading...</span>
                <button class="btn btn-primary btn-sm" onclick="copyDashKey()">Copy</button>
                <button class="btn btn-outline btn-sm" onclick="regenerateKey()">Regenerate</button>
            </div>
            <p class="dash-sub" id="dash-key-warning" style="display:none;color:#dc2626;">New key generated. Your old key is now invalid. Save this key securely!</p>
        </div>
        <!-- Usage Card -->
        <div class="dash-card">
            <h4>Monthly Usage</h4>
            <div class="dash-value" id="dash-used">-</div>
            <div class="dash-sub" id="dash-usage-text">of - requests</div>
            <div class="usage-bar">
                <div class="usage-bar-fill" id="dash-usage-bar" style="width:0%"></div>
            </div>
            <div class="dash-sub" id="dash-reset">Resets on -</div>
        </div>
        <!-- Plan Card -->
        <div class="dash-card">
            <h4>Current Plan</h4>
            <div style="margin-bottom:.8rem;">
                <span class="plan-badge plan-free" id="dash-plan-badge">FREE</span>
            </div>
            <div class="dash-sub" id="dash-plan-details">50 requests/month</div>
            <div class="dash-actions">
                <a href="#pricing" class="btn btn-primary btn-sm" id="dash-upgrade-btn">Upgrade</a>
                <button class="btn btn-outline btn-sm" id="dash-manage-btn" onclick="manageDashSubscription()" style="display:none;">Manage Subscription</button>
            </div>
        </div>
        <!-- Account Card -->
        <div class="dash-card">
            <h4>Account</h4>
            <div style="font-size:.95rem;font-weight:600;" id="dash-email">-</div>
            <div class="dash-sub" id="dash-created">Member since -</div>
        </div>
    </div>
</section>

<!-- â”€â”€ Trust Indicators â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section style="background:#fff;padding:2rem 2rem;border-bottom:1px solid var(--border);">
    <div style="max-width:1200px;margin:0 auto;display:flex;flex-wrap:wrap;justify-content:center;gap:2rem;align-items:center;text-align:center;">
        <div style="display:flex;align-items:center;gap:.5rem;color:var(--text-muted);font-size:.9rem;font-weight:600;">
            <span style="font-size:1.5rem;">ğŸš€</span> Powered by Chromium
        </div>
        <div style="display:flex;align-items:center;gap:.5rem;color:var(--text-muted);font-size:.9rem;font-weight:600;">
            <span style="font-size:1.5rem;">âœ“</span> 99.9% Uptime
        </div>
        <div style="display:flex;align-items:center;gap:.5rem;color:var(--text-muted);font-size:.9rem;font-weight:600;">
            <span style="font-size:1.5rem;">ğŸ</span> Free Tier Available
        </div>
        <div style="display:flex;align-items:center;gap:.5rem;color:var(--text-muted);font-size:.9rem;font-weight:600;">
            <span style="font-size:1.5rem;">ğŸ’³</span> No Credit Card Required
        </div>
    </div>
</section>

<!-- â”€â”€ Features â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section class="section" id="features">
    <div class="section-header">
        <h2>Everything you need for PDFs</h2>
        <p>Seven powerful endpoints covering the most common PDF operations.</p>
    </div>
    <div class="features-grid">
        <div class="feature-card">
            <div class="feature-icon fi-blue">&#128196;</div>
            <h3>HTML to PDF</h3>
            <p>Render any HTML/CSS to pixel-perfect PDFs using headless Chromium. Supports headers, footers, custom margins.</p>
            <code>POST /api/v1/html-to-pdf</code>
        </div>
        <div class="feature-card">
            <div class="feature-icon fi-green">&#127760;</div>
            <h3>URL to PDF</h3>
            <p>Convert any public URL to PDF. Full JavaScript rendering, custom page size, landscape mode.</p>
            <code>POST /api/v1/url-to-pdf</code>
        </div>
        <div class="feature-card">
            <div class="feature-icon fi-purple">&#128279;</div>
            <h3>Merge PDFs</h3>
            <p>Combine up to 50 PDF files into a single document. Preserves bookmarks and links.</p>
            <code>POST /api/v1/merge</code>
        </div>
        <div class="feature-card">
            <div class="feature-icon fi-orange">&#128230;</div>
            <h3>Compress PDF</h3>
            <p>Reduce file size with three quality levels. Image recompression and stream optimization.</p>
            <code>POST /api/v1/compress</code>
        </div>
        <div class="feature-card">
            <div class="feature-icon fi-red">&#9986;</div>
            <h3>Split PDF</h3>
            <p>Extract specific pages or ranges. Returns a ZIP with individual PDFs.</p>
            <code>POST /api/v1/split</code>
        </div>
        <div class="feature-card">
            <div class="feature-icon fi-yellow">&#128167;</div>
            <h3>Watermark</h3>
            <p>Add text watermarks with custom position, opacity, font size and color. Diagonal or fixed placement.</p>
            <code>POST /api/v1/watermark</code>
        </div>
        <div class="feature-card">
            <div class="feature-icon fi-teal">&#128274;</div>
            <h3>Password Protect</h3>
            <p>Encrypt PDFs with AES-256 encryption. Set user and owner passwords.</p>
            <code>POST /api/v1/protect</code>
        </div>
    </div>
</section>

<!-- â”€â”€ Playground â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section class="section" id="playground" style="background:#f1f5f9;max-width:100%;padding-left:2rem;padding-right:2rem;">
    <div style="max-width:1200px;margin:0 auto;">
    <div class="section-header">
        <h2>Try it live</h2>
        <p>Test the API right from your browser. No sign-up required for the free tier.</p>
    </div>
    <div class="playground">
        <div class="playground-row">
            <div>
                <label>Endpoint</label>
                <select id="pg-endpoint">
                    <option value="html-to-pdf">HTML to PDF</option>
                    <option value="url-to-pdf">URL to PDF</option>
                </select>
            </div>
            <div>
                <label>API Key (optional)</label>
                <input type="text" id="pg-key" placeholder="epf_... (leave empty for free tier)">
            </div>
        </div>
        <div style="margin-top:1rem;">
            <label id="pg-input-label">HTML Content</label>
            <textarea id="pg-input">&lt;html&gt;
&lt;body style="font-family:Arial;padding:40px"&gt;
  &lt;h1 style="color:#2563eb"&gt;Hello from EditPDFree API&lt;/h1&gt;
  &lt;p&gt;This PDF was generated via the API playground.&lt;/p&gt;
  &lt;p style="color:#64748b"&gt;Generated at: <span id="pg-date"></span>&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</textarea>
        </div>
        <div style="margin-top:1rem;display:flex;gap:1rem;align-items:center;">
            <button class="btn btn-primary" onclick="runPlayground()">Generate PDF</button>
            <span id="pg-status" style="font-size:.85rem;color:var(--text-muted);"></span>
        </div>
        <div class="playground-result" id="pg-result"></div>
    </div>
    </div>
</section>

<!-- â”€â”€ Get Free API Key â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section class="section" id="get-key">
    <div class="key-form-card">
        <h3>Get Your Free API Key</h3>
        <p>Start using the API instantly. No credit card required.</p>
        <div class="key-input-group">
            <input type="email" id="key-email" placeholder="your@email.com" required>
            <button class="btn btn-primary" onclick="generateFreeKey()">Get Free Key</button>
        </div>
        <div class="key-result" id="key-result">
            <div class="key-result-label">Your API Key</div>
            <div class="key-result-value">
                <span id="key-value"></span>
                <button onclick="copyApiKey()">Copy</button>
            </div>
            <p style="font-size:.85rem;color:var(--text-muted);margin-top:.8rem;">Save this key securely. You can start using it immediately with 50 free conversions per month.</p>
        </div>
        <div id="key-error" style="display:none;margin-top:1rem;padding:.7rem;background:#fee2e2;color:#dc2626;border-radius:6px;font-size:.85rem;"></div>
    </div>
</section>

<!-- â”€â”€ Pricing â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section class="section" id="pricing">
    <div class="section-header">
        <h2>Simple, transparent pricing</h2>
        <p>Start free. Upgrade when you need more.</p>
    </div>
    <div class="pricing-grid">
        <div class="pricing-card">
            <h3>Free</h3>
            <div class="pricing-price">$0<span>/mo</span></div>
            <ul class="pricing-features">
                <li>50 conversions/month</li>
                <li>All 7 endpoints</li>
                <li>Community support</li>
                <li>Small watermark on output</li>
            </ul>
            <a href="#get-key" class="btn btn-outline">Get Free Key</a>
        </div>
        <div class="pricing-card">
            <h3>Starter</h3>
            <div class="pricing-price">$9<span>/mo</span></div>
            <ul class="pricing-features">
                <li>500 conversions/month</li>
                <li>All 7 endpoints</li>
                <li>Email support</li>
                <li>No watermark</li>
            </ul>
            <button class="btn btn-outline" onclick="subscribePlan('starter','https://buy.stripe.com/6oUeVe5CE9h61i0cGY8bS02')">Subscribe</button>
        </div>
        <div class="pricing-card popular">
            <div class="popular-badge">Most Popular</div>
            <h3>Pro</h3>
            <div class="pricing-price">$24<span>/mo</span></div>
            <ul class="pricing-features">
                <li>5,000 conversions/month</li>
                <li>All 7 endpoints</li>
                <li>Priority queue</li>
                <li>No watermark</li>
                <li>Priority support</li>
            </ul>
            <button class="btn btn-primary" onclick="subscribePlan('pro','https://buy.stripe.com/14A3cw5CEbpe8Ks4as8bS04')">Subscribe</button>
        </div>
        <div class="pricing-card">
            <h3>Business</h3>
            <div class="pricing-price">$49<span>/mo</span></div>
            <ul class="pricing-features">
                <li>20,000 conversions/month</li>
                <li>All 7 endpoints</li>
                <li>Priority queue</li>
                <li>No watermark</li>
                <li>SLA guarantee</li>
                <li>Dedicated support</li>
            </ul>
            <button class="btn btn-outline" onclick="subscribePlan('business','https://buy.stripe.com/28E6oI9SUgJy0dW6iA8bS05')">Subscribe</button>
        </div>
    </div>
    <div style="text-align:center;margin-top:2rem;">
        <p style="color:var(--text-muted);font-size:.9rem;">Already a subscriber? <a href="#" onclick="manageSubscription()" style="color:var(--primary);font-weight:600;">Manage your subscription</a></p>
    </div>
</section>

<!-- â”€â”€ Manage Subscription Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="manage-modal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:200;align-items:center;justify-content:center;">
    <div style="background:#fff;border-radius:var(--radius);padding:2rem;max-width:400px;width:90%;box-shadow:var(--shadow-lg);">
        <h3 style="margin-bottom:1rem;">Manage Subscription</h3>
        <p style="color:var(--text-muted);font-size:.9rem;margin-bottom:1rem;">Enter the email you used to subscribe:</p>
        <input type="email" id="manage-email" placeholder="your@email.com" style="width:100%;padding:.6rem .8rem;border:1px solid var(--border);border-radius:8px;font-size:.9rem;margin-bottom:1rem;">
        <div style="display:flex;gap:.5rem;">
            <button class="btn btn-primary" onclick="openPortal()" style="flex:1;">Go to Portal</button>
            <button class="btn btn-outline" onclick="document.getElementById('manage-modal').style.display='none'" style="flex:1;">Cancel</button>
        </div>
        <p id="manage-error" style="display:none;margin-top:.8rem;color:#dc2626;font-size:.85rem;"></p>
    </div>
</div>

<!-- â”€â”€ Code Examples â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section class="section" id="examples" style="background:#f1f5f9;max-width:100%;padding-left:2rem;padding-right:2rem;">
    <div style="max-width:1200px;margin:0 auto;">
    <div class="section-header">
        <h2>Quick start in your language</h2>
        <p>Copy-paste examples to get started in seconds.</p>
    </div>
    <div class="code-tabs">
        <div class="code-tab active" onclick="switchTab('curl')">cURL</div>
        <div class="code-tab" onclick="switchTab('python')">Python</div>
        <div class="code-tab" onclick="switchTab('javascript')">JavaScript</div>
        <div class="code-tab" onclick="switchTab('php')">PHP</div>
        <div class="code-tab" onclick="switchTab('ruby')">Ruby</div>
    </div>
    <div class="code-panel active" id="tab-curl">
        <button class="copy-btn" onclick="copyTab('curl')">Copy</button>
        <pre># HTML to PDF
curl -X POST https://api.editpdfree.com/api/v1/html-to-pdf \
  -H "Content-Type: application/json" \
  -H "X-API-Key: YOUR_API_KEY" \
  -d '{"html": "&lt;h1&gt;Invoice #1234&lt;/h1&gt;&lt;p&gt;Total: $99.00&lt;/p&gt;"}' \
  -o invoice.pdf

# Merge PDFs
curl -X POST https://api.editpdfree.com/api/v1/merge \
  -H "X-API-Key: YOUR_API_KEY" \
  -F "files=@doc1.pdf" \
  -F "files=@doc2.pdf" \
  -o merged.pdf

# Compress PDF
curl -X POST https://api.editpdfree.com/api/v1/compress \
  -H "X-API-Key: YOUR_API_KEY" \
  -F "file=@large.pdf" \
  -F "quality=medium" \
  -o compressed.pdf

# Check usage
curl https://api.editpdfree.com/api/v1/usage \
  -H "X-API-Key: YOUR_API_KEY"</pre>
    </div>
    <div class="code-panel" id="tab-python">
        <button class="copy-btn" onclick="copyTab('python')">Copy</button>
        <pre>import requests

API_URL = "https://api.editpdfree.com/api/v1"
API_KEY = "YOUR_API_KEY"
headers = {"X-API-Key": API_KEY}

# HTML to PDF
resp = requests.post(f"{API_URL}/html-to-pdf", headers=headers, json={
    "html": "&lt;h1&gt;Invoice #1234&lt;/h1&gt;&lt;p&gt;Total: $99.00&lt;/p&gt;",
    "options": {"format": "A4", "margin": {"top": "20mm", "bottom": "20mm"}}
})
with open("invoice.pdf", "wb") as f:
    f.write(resp.content)

# Merge PDFs
files = [
    ("files", ("doc1.pdf", open("doc1.pdf", "rb"), "application/pdf")),
    ("files", ("doc2.pdf", open("doc2.pdf", "rb"), "application/pdf")),
]
resp = requests.post(f"{API_URL}/merge", headers=headers, files=files)
with open("merged.pdf", "wb") as f:
    f.write(resp.content)

# Compress PDF
resp = requests.post(f"{API_URL}/compress", headers=headers,
    files={"file": open("large.pdf", "rb")},
    data={"quality": "medium"})
with open("compressed.pdf", "wb") as f:
    f.write(resp.content)

# Check usage
usage = requests.get(f"{API_URL}/usage", headers=headers).json()
print(f"Used: {usage['used']}/{usage['monthly_limit']}")</pre>
    </div>
    <div class="code-panel" id="tab-javascript">
        <button class="copy-btn" onclick="copyTab('javascript')">Copy</button>
        <pre>const API_URL = "https://api.editpdfree.com/api/v1";
const API_KEY = "YOUR_API_KEY";

// HTML to PDF
const pdfResp = await fetch(`${API_URL}/html-to-pdf`, {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "X-API-Key": API_KEY,
  },
  body: JSON.stringify({
    html: "&lt;h1&gt;Invoice #1234&lt;/h1&gt;&lt;p&gt;Total: $99.00&lt;/p&gt;",
    options: { format: "A4" }
  })
});
const pdfBlob = await pdfResp.blob();
// Save or download pdfBlob

// Merge PDFs
const formData = new FormData();
formData.append("files", file1);
formData.append("files", file2);
const mergeResp = await fetch(`${API_URL}/merge`, {
  method: "POST",
  headers: { "X-API-Key": API_KEY },
  body: formData
});

// Check usage
const usage = await fetch(`${API_URL}/usage`, {
  headers: { "X-API-Key": API_KEY }
}).then(r => r.json());
console.log(`Used: ${usage.used}/${usage.monthly_limit}`);</pre>
    </div>
    <div class="code-panel" id="tab-php">
        <button class="copy-btn" onclick="copyTab('php')">Copy</button>
        <pre>&lt;?php
$apiUrl = "https://api.editpdfree.com/api/v1";
$apiKey = "YOUR_API_KEY";

// HTML to PDF
$ch = curl_init("$apiUrl/html-to-pdf");
curl_setopt_array($ch, [
    CURLOPT_POST => true,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_HTTPHEADER => [
        "Content-Type: application/json",
        "X-API-Key: $apiKey"
    ],
    CURLOPT_POSTFIELDS => json_encode([
        "html" => "&lt;h1&gt;Invoice #1234&lt;/h1&gt;",
        "options" => ["format" => "A4"]
    ])
]);
$pdf = curl_exec($ch);
file_put_contents("invoice.pdf", $pdf);

// Merge PDFs
$ch = curl_init("$apiUrl/merge");
curl_setopt_array($ch, [
    CURLOPT_POST => true,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_HTTPHEADER => ["X-API-Key: $apiKey"],
    CURLOPT_POSTFIELDS => [
        "files[0]" => new CURLFile("doc1.pdf"),
        "files[1]" => new CURLFile("doc2.pdf"),
    ]
]);
$merged = curl_exec($ch);
file_put_contents("merged.pdf", $merged);

// Check usage
$ch = curl_init("$apiUrl/usage");
curl_setopt_array($ch, [
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_HTTPHEADER => ["X-API-Key: $apiKey"],
]);
$usage = json_decode(curl_exec($ch), true);
echo "Used: {$usage['used']}/{$usage['monthly_limit']}";</pre>
    </div>
    <div class="code-panel" id="tab-ruby">
        <button class="copy-btn" onclick="copyTab('ruby')">Copy</button>
        <pre>require "net/http"
require "json"
require "uri"

API_URL = "https://api.editpdfree.com/api/v1"
API_KEY = "YOUR_API_KEY"

# HTML to PDF
uri = URI("#{API_URL}/html-to-pdf")
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true

req = Net::HTTP::Post.new(uri)
req["Content-Type"] = "application/json"
req["X-API-Key"] = API_KEY
req.body = {
  html: "&lt;h1&gt;Invoice #1234&lt;/h1&gt;",
  options: { format: "A4" }
}.to_json

res = http.request(req)
File.binwrite("invoice.pdf", res.body)

# Check usage
uri = URI("#{API_URL}/usage")
req = Net::HTTP::Get.new(uri)
req["X-API-Key"] = API_KEY
res = http.request(req)
usage = JSON.parse(res.body)
puts "Used: #{usage['used']}/#{usage['monthly_limit']}"</pre>
    </div>
    </div>
</section>

<!-- â”€â”€ Documentation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section class="section" id="docs">
    <div class="section-header">
        <h2>API Reference</h2>
        <p>Complete documentation for all endpoints. All endpoints accept an <code>X-API-Key</code> header.</p>
    </div>

    <div class="endpoint-card">
        <span class="endpoint-method method-post">POST</span>
        <span class="endpoint-path">/api/v1/html-to-pdf</span>
        <p class="endpoint-desc">Convert an HTML string to a PDF file.</p>
        <div class="endpoint-params">
            <table>
                <thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead>
                <tbody>
                    <tr><td><code>html</code></td><td>string</td><td>Yes</td><td>HTML content to render</td></tr>
                    <tr><td><code>options.format</code></td><td>string</td><td>No</td><td>Page size: A4, Letter, A3, etc. Default: A4</td></tr>
                    <tr><td><code>options.margin</code></td><td>object</td><td>No</td><td><code>{top, right, bottom, left}</code> in CSS units (e.g. "10mm")</td></tr>
                    <tr><td><code>options.landscape</code></td><td>boolean</td><td>No</td><td>Landscape orientation. Default: false</td></tr>
                    <tr><td><code>options.header_html</code></td><td>string</td><td>No</td><td>HTML template for page header</td></tr>
                    <tr><td><code>options.footer_html</code></td><td>string</td><td>No</td><td>HTML template for page footer</td></tr>
                    <tr><td><code>options.print_background</code></td><td>boolean</td><td>No</td><td>Print background graphics. Default: true</td></tr>
                    <tr><td><code>options.scale</code></td><td>number</td><td>No</td><td>Scale factor (0.1 to 2.0). Default: 1.0</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="endpoint-card">
        <span class="endpoint-method method-post">POST</span>
        <span class="endpoint-path">/api/v1/url-to-pdf</span>
        <p class="endpoint-desc">Convert a public URL to a PDF file. Full JS rendering supported.</p>
        <div class="endpoint-params">
            <table>
                <thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead>
                <tbody>
                    <tr><td><code>url</code></td><td>string</td><td>Yes</td><td>Public URL to convert (must start with http:// or https://)</td></tr>
                    <tr><td><code>options</code></td><td>object</td><td>No</td><td>Same options as html-to-pdf</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="endpoint-card">
        <span class="endpoint-method method-post">POST</span>
        <span class="endpoint-path">/api/v1/merge</span>
        <p class="endpoint-desc">Merge multiple PDF files into one. Send as multipart/form-data.</p>
        <div class="endpoint-params">
            <table>
                <thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead>
                <tbody>
                    <tr><td><code>files</code></td><td>File[]</td><td>Yes</td><td>2 to 50 PDF files to merge</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="endpoint-card">
        <span class="endpoint-method method-post">POST</span>
        <span class="endpoint-path">/api/v1/compress</span>
        <p class="endpoint-desc">Compress a PDF file to reduce size.</p>
        <div class="endpoint-params">
            <table>
                <thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead>
                <tbody>
                    <tr><td><code>file</code></td><td>File</td><td>Yes</td><td>PDF file to compress</td></tr>
                    <tr><td><code>quality</code></td><td>string</td><td>No</td><td><code>low</code>, <code>medium</code> (default), or <code>high</code></td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="endpoint-card">
        <span class="endpoint-method method-post">POST</span>
        <span class="endpoint-path">/api/v1/split</span>
        <p class="endpoint-desc">Split a PDF into multiple files. Returns a ZIP archive.</p>
        <div class="endpoint-params">
            <table>
                <thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead>
                <tbody>
                    <tr><td><code>file</code></td><td>File</td><td>Yes</td><td>PDF file to split</td></tr>
                    <tr><td><code>pages</code></td><td>string</td><td>Yes</td><td>Page ranges: e.g. "1-3,5,7-10"</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="endpoint-card">
        <span class="endpoint-method method-post">POST</span>
        <span class="endpoint-path">/api/v1/watermark</span>
        <p class="endpoint-desc">Add a text watermark to all pages of a PDF.</p>
        <div class="endpoint-params">
            <table>
                <thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead>
                <tbody>
                    <tr><td><code>file</code></td><td>File</td><td>Yes</td><td>PDF file</td></tr>
                    <tr><td><code>text</code></td><td>string</td><td>Yes</td><td>Watermark text (max 200 chars)</td></tr>
                    <tr><td><code>opacity</code></td><td>number</td><td>No</td><td>0.0 to 1.0. Default: 0.3</td></tr>
                    <tr><td><code>position</code></td><td>string</td><td>No</td><td><code>diagonal</code> (default), <code>center</code>, <code>top-left</code>, <code>top-right</code>, <code>bottom-left</code>, <code>bottom-right</code></td></tr>
                    <tr><td><code>font_size</code></td><td>number</td><td>No</td><td>8 to 200. Default: 48</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="endpoint-card">
        <span class="endpoint-method method-post">POST</span>
        <span class="endpoint-path">/api/v1/protect</span>
        <p class="endpoint-desc">Password-protect a PDF with AES-256 encryption.</p>
        <div class="endpoint-params">
            <table>
                <thead><tr><th>Parameter</th><th>Type</th><th>Required</th><th>Description</th></tr></thead>
                <tbody>
                    <tr><td><code>file</code></td><td>File</td><td>Yes</td><td>PDF file</td></tr>
                    <tr><td><code>password</code></td><td>string</td><td>Yes</td><td>User password to open PDF</td></tr>
                    <tr><td><code>owner_password</code></td><td>string</td><td>No</td><td>Owner password (defaults to user password)</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="endpoint-card">
        <span class="endpoint-method method-get">GET</span>
        <span class="endpoint-path">/api/v1/usage</span>
        <p class="endpoint-desc">Check your current API usage for the billing period.</p>
        <div class="endpoint-params">
            <table>
                <thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead>
                <tbody>
                    <tr><td><code>used</code></td><td>int</td><td>Number of API calls this month</td></tr>
                    <tr><td><code>remaining</code></td><td>int</td><td>Remaining calls this month</td></tr>
                    <tr><td><code>plan</code></td><td>string</td><td>Current plan name</td></tr>
                    <tr><td><code>monthly_limit</code></td><td>int</td><td>Total monthly limit</td></tr>
                    <tr><td><code>reset_date</code></td><td>string</td><td>ISO date when limits reset</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <div style="text-align:center;margin-top:2rem;">
        <p style="color:var(--text-muted);font-size:.9rem;">All endpoints return rate limit headers: <code>X-RateLimit-Limit</code>, <code>X-RateLimit-Remaining</code>, <code>X-RateLimit-Reset</code></p>
        <p style="margin-top:.5rem;"><a href="/docs" class="btn btn-outline btn-sm">OpenAPI / Swagger Docs</a></p>
    </div>
</section>

<!-- â”€â”€ FAQ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section class="section" id="faq" style="background:#f8fafc;max-width:100%;padding-left:2rem;padding-right:2rem;">
    <div style="max-width:1200px;margin:0 auto;">
    <div class="section-header">
        <h2>Frequently Asked Questions</h2>
        <p>Everything you need to know about the EditPDFree API.</p>
    </div>
    <div class="faq-grid">
        <div class="faq-item">
            <h3>What is EditPDFree API?</h3>
            <p>EditPDFree API is a RESTful API that provides powerful PDF processing capabilities for developers. It allows you to convert HTML and URLs to PDF, merge, compress, split, watermark, and password-protect PDF files through simple HTTP requests. The API is built on Chromium for pixel-perfect rendering and supports all modern web standards.</p>
        </div>
        <div class="faq-item">
            <h3>Is there a free tier?</h3>
            <p>Yes! The free tier includes 50 conversions per month with access to all 7 endpoints. No credit card is required to get started. Simply enter your email above to get your free API key instantly. Free tier outputs include a small watermark, which is removed on paid plans.</p>
        </div>
        <div class="faq-item">
            <h3>What formats are supported?</h3>
            <p>The API accepts HTML strings, public URLs, and PDF files as input. Output is always PDF (or ZIP for split operations). For HTML to PDF conversion, you can customize page size (A4, Letter, A3, etc.), margins, orientation, headers, footers, and more. All modern HTML5 and CSS3 features are supported.</p>
        </div>
        <div class="faq-item">
            <h3>How do I authenticate?</h3>
            <p>Authentication is done via the <code>X-API-Key</code> header in your HTTP requests. After getting your API key, simply include it in every request: <code>-H "X-API-Key: YOUR_KEY"</code>. Your key is tied to your account and should be kept secure. Never expose it in client-side code.</p>
        </div>
        <div class="faq-item">
            <h3>What happens if I exceed my limit?</h3>
            <p>If you exceed your monthly limit, the API will return a 429 (Too Many Requests) error with rate limit headers. You can upgrade to a higher plan anytime by contacting us. Limits reset on the 1st of each month. You can check your current usage at any time using the <code>/api/v1/usage</code> endpoint.</p>
        </div>
    </div>
    </div>
</section>

<!-- â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<footer>
    <p style="margin-bottom:.5rem;font-size:1rem;">Powered by <a href="https://www.editpdfree.com" target="_blank"><strong>EditPDFree.com</strong></a></p>
    <p>&copy; 2026 EditPDFree. All rights reserved. &middot; <a href="https://www.editpdfree.com/privacy">Privacy</a> &middot; <a href="https://www.editpdfree.com/terms">Terms</a></p>
</footer>

<script>
// â”€â”€ Playground â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.getElementById("pg-date").textContent = new Date().toLocaleString();

document.getElementById("pg-endpoint").addEventListener("change", function() {
    const label = document.getElementById("pg-input-label");
    const input = document.getElementById("pg-input");
    if (this.value === "url-to-pdf") {
        label.textContent = "URL";
        input.value = "https://www.editpdfree.com";
        input.style.minHeight = "40px";
    } else {
        label.textContent = "HTML Content";
        input.value = '<html>\n<body style="font-family:Arial;padding:40px">\n  <h1 style="color:#2563eb">Hello from EditPDFree API</h1>\n  <p>This PDF was generated via the API playground.</p>\n</body>\n</html>';
        input.style.minHeight = "120px";
    }
});

async function runPlayground() {
    const endpoint = document.getElementById("pg-endpoint").value;
    const apiKey = document.getElementById("pg-key").value;
    const input = document.getElementById("pg-input").value;
    const status = document.getElementById("pg-status");
    const result = document.getElementById("pg-result");

    status.textContent = "Generating PDF...";
    status.style.color = "var(--primary)";
    result.style.display = "none";

    const headers = { "Content-Type": "application/json" };
    if (apiKey) headers["X-API-Key"] = apiKey;

    let body;
    if (endpoint === "html-to-pdf") {
        body = JSON.stringify({ html: input, options: { format: "A4" } });
    } else {
        body = JSON.stringify({ url: input, options: { format: "A4" } });
    }

    try {
        const resp = await fetch(`/api/v1/${endpoint}`, { method: "POST", headers, body });

        if (!resp.ok) {
            const err = await resp.json();
            throw new Error(err.detail || `HTTP ${resp.status}`);
        }

        const blob = await resp.blob();
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "output.pdf";
        a.click();
        URL.revokeObjectURL(url);

        const limit = resp.headers.get("X-RateLimit-Limit");
        const remaining = resp.headers.get("X-RateLimit-Remaining");
        status.textContent = `PDF generated (${(blob.size/1024).toFixed(1)} KB). Remaining: ${remaining}/${limit}`;
        status.style.color = "var(--success)";
    } catch (e) {
        status.textContent = `Error: ${e.message}`;
        status.style.color = "#dc2626";
        result.style.display = "block";
        result.textContent = e.message;
    }
}

// â”€â”€ Code tabs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function switchTab(lang) {
    document.querySelectorAll(".code-tab").forEach(t => t.classList.remove("active"));
    document.querySelectorAll(".code-panel").forEach(p => p.classList.remove("active"));
    document.querySelector(`.code-tab[onclick*="${lang}"]`).classList.add("active");
    document.getElementById(`tab-${lang}`).classList.add("active");
}

function copyTab(lang) {
    const text = document.querySelector(`#tab-${lang} pre`).textContent;
    navigator.clipboard.writeText(text).then(() => {
        const btn = document.querySelector(`#tab-${lang} .copy-btn`);
        btn.textContent = "Copied!";
        setTimeout(() => btn.textContent = "Copy", 2000);
    });
}

function manageSubscription() {
    document.getElementById('manage-modal').style.display = 'flex';
    document.getElementById('manage-email').focus();
}

async function openPortal() {
    const email = document.getElementById('manage-email').value.trim();
    const errorEl = document.getElementById('manage-error');
    if (!email) { errorEl.textContent = 'Please enter your email.'; errorEl.style.display = 'block'; return; }
    errorEl.style.display = 'none';

    try {
        const resp = await fetch('/api/v1/manage-subscription', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email })
        });
        if (!resp.ok) {
            const err = await resp.json();
            throw new Error(err.detail || 'No subscription found');
        }
        const data = await resp.json();
        window.location.href = data.url;
    } catch (e) {
        errorEl.textContent = e.message;
        errorEl.style.display = 'block';
    }
}

function copyHero() {
    const text = document.querySelector(".hero-code pre").textContent;
    navigator.clipboard.writeText(text).then(() => {
        const btn = document.querySelector(".hero-code .copy-btn");
        btn.textContent = "Copied!";
        setTimeout(() => btn.textContent = "Copy", 2000);
    });
}

// â”€â”€ Get Free API Key â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function generateFreeKey() {
    const email = document.getElementById("key-email").value.trim();
    const result = document.getElementById("key-result");
    const error = document.getElementById("key-error");

    error.style.display = "none";
    result.style.display = "none";

    if (!email || !email.includes("@")) {
        error.textContent = "Please enter a valid email address.";
        error.style.display = "block";
        return;
    }

    try {
        const resp = await fetch(`/api/v1/generate-key?plan=free&email=${encodeURIComponent(email)}`, {
            method: "POST"
        });

        if (!resp.ok) {
            const err = await resp.json();
            throw new Error(err.detail || `HTTP ${resp.status}`);
        }

        const data = await resp.json();
        document.getElementById("key-value").textContent = data.api_key;
        result.style.display = "block";
    } catch (e) {
        error.textContent = `Error: ${e.message}`;
        error.style.display = "block";
    }
}

function copyApiKey() {
    const keyValue = document.getElementById("key-value").textContent;
    navigator.clipboard.writeText(keyValue).then(() => {
        const btn = event.target;
        btn.textContent = "Copied!";
        setTimeout(() => btn.textContent = "Copy", 2000);
    });
}

// Allow Enter key to submit
document.addEventListener("DOMContentLoaded", function() {
    const emailInput = document.getElementById("key-email");
    if (emailInput) {
        emailInput.addEventListener("keypress", function(e) {
            if (e.key === "Enter") {
                generateFreeKey();
            }
        });
    }
});

// â”€â”€ Firebase Auth â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
</script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
<script>
var firebaseConfig = {
    apiKey: "AIzaSyDp5Ctt6lR3DuGr9SIkfXVFS_u4X3JKYs8",
    authDomain: "editpdfree.firebaseapp.com",
    projectId: "editpdfree",
    storageBucket: "editpdfree.firebasestorage.app",
    messagingSenderId: "773540567759",
    appId: "1:773540567759:web:d5ca7401020c845c41f5ba"
};
var firebaseApp = firebase.initializeApp(firebaseConfig);
var auth = firebase.auth();

var currentUser = null;

// Auth state listener
auth.onAuthStateChanged(async function(user) {
    currentUser = user;
    if (user) {
        document.getElementById('auth-buttons').style.display = 'none';
        document.getElementById('user-menu').style.display = 'flex';
        const initial = (user.email || 'U')[0].toUpperCase();
        document.getElementById('user-avatar').textContent = initial;
        closeAuthModal();
        // Register with backend + load dashboard
        await registerAndLoadDashboard();
        // Redirect to Stripe if there was a pending subscribe
        if (window._pendingSubscribe) {
            const url = window._pendingSubscribe;
            window._pendingSubscribe = null;
            const sep = url.includes('?') ? '&' : '?';
            window.location.href = url + sep + 'prefilled_email=' + encodeURIComponent(user.email);
            return;
        }
    } else {
        document.getElementById('auth-buttons').style.display = 'flex';
        document.getElementById('user-menu').style.display = 'none';
        document.getElementById('dashboard').classList.remove('active');
    }
});

function showAuthModal(mode) {
    document.getElementById('auth-modal').classList.add('active');
    switchAuthMode(mode || 'login');
    // Hide notice unless set by subscribePlan
    if (!window._pendingSubscribe) {
        document.getElementById('auth-notice').style.display = 'none';
    }
}

function closeAuthModal() {
    document.getElementById('auth-modal').classList.remove('active');
    document.getElementById('auth-error').style.display = 'none';
    document.getElementById('auth-signup-error').style.display = 'none';
    document.getElementById('auth-notice').style.display = 'none';
    window._pendingSubscribe = null;
}

function switchAuthMode(mode) {
    if (mode === 'signup') {
        document.getElementById('auth-login-form').style.display = 'none';
        document.getElementById('auth-signup-form').style.display = 'block';
    } else {
        document.getElementById('auth-login-form').style.display = 'block';
        document.getElementById('auth-signup-form').style.display = 'none';
    }
}

async function loginWithEmail() {
    const email = document.getElementById('auth-email').value.trim();
    const password = document.getElementById('auth-password').value;
    const errorEl = document.getElementById('auth-error');
    errorEl.style.display = 'none';

    if (!email || !password) {
        errorEl.textContent = 'Please fill in all fields.';
        errorEl.style.display = 'block';
        return;
    }

    try {
        await auth.signInWithEmailAndPassword(email, password);
    } catch (e) {
        errorEl.textContent = e.message.replace('Firebase: ', '').replace(/\(auth\/.*\)/, '').trim();
        errorEl.style.display = 'block';
    }
}

async function signupWithEmail() {
    const email = document.getElementById('signup-email').value.trim();
    const password = document.getElementById('signup-password').value;
    const errorEl = document.getElementById('auth-signup-error');
    errorEl.style.display = 'none';

    if (!email || !password) {
        errorEl.textContent = 'Please fill in all fields.';
        errorEl.style.display = 'block';
        return;
    }

    try {
        await auth.createUserWithEmailAndPassword(email, password);
    } catch (e) {
        errorEl.textContent = e.message.replace('Firebase: ', '').replace(/\(auth\/.*\)/, '').trim();
        errorEl.style.display = 'block';
    }
}

async function loginWithGoogle() {
    const provider = new firebase.auth.GoogleAuthProvider();
    try {
        // Try popup first, fall back to redirect
        await auth.signInWithPopup(provider);
    } catch (e) {
        if (e.code === 'auth/popup-blocked' || e.code === 'auth/unauthorized-domain' || e.code === 'auth/popup-closed-by-user') {
            // Fallback to redirect
            try {
                await auth.signInWithRedirect(provider);
            } catch (e2) {
                const errorEl = document.getElementById('auth-error');
                errorEl.textContent = e2.message.replace('Firebase: ', '').replace(/\(auth\/.*\)/, '').trim();
                errorEl.style.display = 'block';
            }
        } else {
            const errorEl = document.getElementById('auth-error');
            errorEl.textContent = e.message.replace('Firebase: ', '').replace(/\(auth\/.*\)/, '').trim();
            errorEl.style.display = 'block';
        }
    }
}

function logoutUser() {
    auth.signOut();
}

function scrollToDashboard() {
    document.getElementById('dashboard').scrollIntoView({ behavior: 'smooth' });
}

// â”€â”€ Dashboard Logic â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function getAuthHeader() {
    if (!currentUser) return {};
    const token = await currentUser.getIdToken();
    return { 'Authorization': 'Bearer ' + token };
}

async function registerAndLoadDashboard() {
    try {
        const headers = await getAuthHeader();
        // Register (will do nothing if already registered)
        const regResp = await fetch('/api/v1/auth/register', {
            method: 'POST',
            headers: headers
        });
        const regData = await regResp.json();

        // If a new key was returned, show it
        if (regData.api_key) {
            document.getElementById('dash-api-key').textContent = regData.api_key;
            document.getElementById('dash-key-warning').style.display = 'block';
            document.getElementById('dash-key-warning').textContent = 'This is your new API key. Save it securely - it won\'t be shown again!';
        }

        // Load full dashboard data
        await loadDashboard();

        // Show dashboard section
        document.getElementById('dashboard').classList.add('active');
    } catch (e) {
        console.error('Dashboard error:', e);
    }
}

async function loadDashboard() {
    try {
        const headers = await getAuthHeader();
        const resp = await fetch('/api/v1/auth/dashboard', { headers });
        if (!resp.ok) return;
        const data = await resp.json();

        // API Key (show prefix only if no full key displayed)
        const keyEl = document.getElementById('dash-api-key');
        if (!keyEl.textContent.startsWith('epf_') || keyEl.textContent.length < 20) {
            keyEl.textContent = data.api_key_prefix + '...' + '****';
        }

        // Usage
        document.getElementById('dash-used').textContent = data.used;
        document.getElementById('dash-usage-text').textContent = `of ${data.limit} requests`;
        const pct = Math.min(100, (data.used / data.limit) * 100);
        const bar = document.getElementById('dash-usage-bar');
        bar.style.width = pct + '%';
        bar.className = 'usage-bar-fill' + (pct > 90 ? ' danger' : pct > 70 ? ' warning' : '');
        document.getElementById('dash-reset').textContent = 'Resets on ' + data.reset_date;

        // Plan
        const planBadge = document.getElementById('dash-plan-badge');
        planBadge.textContent = data.plan.toUpperCase();
        planBadge.className = 'plan-badge plan-' + data.plan;
        document.getElementById('dash-plan-details').textContent = data.limit + ' requests/month' + (data.watermark ? ' (watermark)' : '');

        // Show/hide upgrade vs manage
        if (data.plan === 'free') {
            document.getElementById('dash-upgrade-btn').style.display = '';
            document.getElementById('dash-manage-btn').style.display = 'none';
        } else {
            document.getElementById('dash-upgrade-btn').style.display = 'none';
            document.getElementById('dash-manage-btn').style.display = '';
        }

        // Account
        document.getElementById('dash-email').textContent = data.email || currentUser.email || '-';
        document.getElementById('dash-created').textContent = 'Member since ' + new Date(data.created_at).toLocaleDateString();
    } catch (e) {
        console.error('Load dashboard error:', e);
    }
}

function copyDashKey() {
    const keyText = document.getElementById('dash-api-key').textContent;
    navigator.clipboard.writeText(keyText).then(() => {
        const btn = event.target;
        btn.textContent = 'Copied!';
        setTimeout(() => btn.textContent = 'Copy', 2000);
    });
}

async function regenerateKey() {
    if (!confirm('Are you sure? Your current API key will be permanently invalidated.')) return;

    try {
        const headers = await getAuthHeader();
        headers['Content-Type'] = 'application/json';
        const resp = await fetch('/api/v1/auth/regenerate-key', {
            method: 'POST',
            headers: headers
        });
        if (!resp.ok) {
            const err = await resp.json();
            alert('Error: ' + (err.detail || 'Failed to regenerate key'));
            return;
        }
        const data = await resp.json();
        document.getElementById('dash-api-key').textContent = data.api_key;
        document.getElementById('dash-key-warning').style.display = 'block';
        document.getElementById('dash-key-warning').textContent = 'New key generated. Your old key is now invalid. Save this key securely!';
    } catch (e) {
        alert('Error: ' + e.message);
    }
}

async function manageDashSubscription() {
    try {
        const email = currentUser.email;
        const resp = await fetch('/api/v1/manage-subscription', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email })
        });
        if (!resp.ok) {
            const err = await resp.json();
            alert(err.detail || 'No subscription found');
            return;
        }
        const data = await resp.json();
        window.location.href = data.url;
    } catch (e) {
        alert('Error: ' + e.message);
    }
}

// â”€â”€ Subscribe (requires login) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function subscribePlan(plan, stripeUrl) {
    if (!currentUser) {
        showAuthModal('login');
        // Show notice explaining why login is needed
        const notice = document.getElementById('auth-notice');
        notice.textContent = 'Please log in or create an account to subscribe to the ' + plan.charAt(0).toUpperCase() + plan.slice(1) + ' plan.';
        notice.style.display = 'block';
        // Store intent to redirect after login
        window._pendingSubscribe = stripeUrl;
        return;
    }
    // Append prefilled email to Stripe URL
    const email = currentUser.email;
    const separator = stripeUrl.includes('?') ? '&' : '?';
    window.location.href = stripeUrl + separator + 'prefilled_email=' + encodeURIComponent(email);
}

// Enter key support for auth forms
document.addEventListener('DOMContentLoaded', function() {
    ['auth-password'].forEach(function(id) {
        var el = document.getElementById(id);
        if (el) el.addEventListener('keypress', function(e) { if (e.key === 'Enter') loginWithEmail(); });
    });
    ['signup-password'].forEach(function(id) {
        var el = document.getElementById(id);
        if (el) el.addEventListener('keypress', function(e) { if (e.key === 'Enter') signupWithEmail(); });
    });
});
</script>
</body>
</html>
